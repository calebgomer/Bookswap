extends layout
block content
  form(action='/join', method='post', onsubmit='return validateForm();')
    input(type='hidden', name='_csrf', value=csrfToken)
    .form-group
      label.col-sm-2.control-label(for='name') Name
      .col-sm-10
        input.form-control(type='name', name='name', id='name')
    br
    .form-group
      label.col-sm-2.control-label(for='email') Email
      .col-sm-10
        input.form-control(type='email', name='email', id='email')
    br
    .form-group
      label.col-sm-2.control-label(for='password') Password
      .col-sm-10
        input.form-control(type='password', name='password', id='password')
    br
    .form-group
      label.col-sm-2.control-label(for='password') Confirm Password
      .col-sm-10
        input.form-control(type='password', name='password2', id='password2')
    br
    input.form-control(type='submit', name='submit', value='Join')
  script(type='text/javascript').
    function validateForm() {
      if (!document.getElementById('name').value) {
        showError('Please enter your name');
        return false;
      }
      var email = document.getElementById('email').value;
      if (!email || email.length <= 4 || email.indexOf('@') === -1 || email.indexOf(".edu", email.length - 4) === -1) {
        showError('Please enter a valid university email');
        return false;
      }
      var password = document.getElementById('password').value;
      var password2 = document.getElementById('password2').value;
      if (!password || !password2 || password.length < 8 || password !== password2) {
        showError('Please make sure your passwords match and are at least 8 characters');
        return false;
      }
      return true;
    }
    function showError(message) {
      document.getElementById('error').innerHTML = message;
    }
